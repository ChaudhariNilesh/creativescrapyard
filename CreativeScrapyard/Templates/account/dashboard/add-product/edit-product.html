{% extends 'account/base-dashboard.html' %} {% load static %} {% block baselink %}
<link rel="stylesheet" href="{% static 'css/nikul/add-product.css' %}"/> {% endblock %} {% block base %}

<div class="page-title">
    Edit Creative item details
</div>
<hr/>

<div class="main-page">
    <form method="post" enctype="multipart/form-data" action="{% url 'Authentication:edit_creative_product' id %}">{% csrf_token %}
        <div class="form-group">
            <label for="productName">Product Name</label>
            <input type="text" name="crt_item_name"
                   class="form-control {% if mst.errors.crt_item_name == None and mst.is_bound %} is-valid {% elif mst.errors.crt_item_name != None %} is-invalid {% endif %}"
                   id="productName" placeholder="Product Name" aria-describedby="inputGroupPrepend3 validateItemName"
                   value="{{mst.crt_item_name.value | default:''}}">
            <div id="validateItemName" class="invalid-feedback">
                {{ mst.crt_item_name.errors.as_text}}
            </div>
        </div>
        <div class="form-group">
            <label for="productDescription">Product Description</label>
            <textarea
                    class="form-control {% if mst.errors.crt_item_desc == None and mst.is_bound %} is-valid {% elif mst.errors.crt_item_desc != None %} is-invalid {% endif %}"
                    name="crt_item_desc" id="productDescription" rows="3"
                    aria-describedby="inputGroupPrepend3 validateItemDesc">{{mst.crt_item_desc.value | default:''}}</textarea>
            <div id="validateItemDesc" class="invalid-feedback">
                {{ mst.crt_item_desc.errors.as_text}}
            </div>
        </div>


        <div class="row">
            <div class="col">
                <div class="form-group">
                    <label for="weight">Weight</label>
                    <select id="weight" name="crt_item_weight"
                            class="form-control {% if mst.errors.crt_item_weight == None and mst.is_bound %} is-valid {% elif mst.errors.crt_item_weight != None %} is-invalid {% endif %}"
                            aria-describedby="inputGroupPrepend3 validateWeight">
                        <option value="0">Choose...</option>
                        <option value="1" {%if mst.crt_item_weight.value == '1' %}selected{%endif%}>Below 100g</option>
                        <option value="2" {%if mst.crt_item_weight.value == '2' %}selected{%endif%}>Below 250g</option>
                        <option value="3" {%if mst.crt_item_weight.value == '3' %}selected{%endif%}>Below 500g</option>
                        <option value="4" {%if mst.crt_item_weight.value == '4' %}selected{%endif%}>Below 1kg</option>
                        <option value="5" {%if mst.crt_item_weight.value == '5' %}selected{%endif%}>Below 5kg</option>
                    </select>
                    <div id="validateWeight" class="invalid-feedback">
                        {{ mst.crt_item_weight.errors.as_text}}
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="form-group">
                    <label for="height">Height</label>
                    <div class="input-group mb-2">
                        <input id="height" name="crt_item_height" value="{{mst.crt_item_height.value | default:''}}"
                               class="form-control {% if mst.errors.crt_item_height == None and mst.is_bound %} is-valid {% elif mst.errors.crt_item_height != None %} is-invalid {% endif %}"
                               aria-describedby="inputGroupPrepend3 validateHeight"/>
                        <div class="input-group-append">
                            <div class="input-group-text">cm</div>
                        </div>
                        <div id="validateHeight" class="invalid-feedback">
                            {{ mst.crt_item_height.errors.as_text }}
                        </div>
                    </div>
                </div>

            </div>
            <div class="col">
                <div class="form-group">
                    <label for="width">Width</label>
                    <div class="input-group mb-2">
                        <input id="width" name="crt_item_width" value="{{mst.crt_item_width.value | default:''}}"
                           class="form-control {% if mst.errors.crt_item_width == None and mst.is_bound %} is-valid {% elif mst.errors.crt_item_width != None %} is-invalid {% endif %}"
                           aria-describedby="inputGroupPrepend3 validateWidth"/>
                        <div class="input-group-append">
                            <div class="input-group-text">cm</div>
                        </div>
                        <div id="validateWidth" class="invalid-feedback">
                            {{ mst.crt_item_width.errors.as_text }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="form-group">
                    <label for="itemCategory">Category</label>
                    <select id="itemCategory" name="itemCategory" class="form-control" onchange="getCat();" required>
                        <option value="">Choose...</option>
                        {% for cat in crtCategory %}
                        <option data-url="{% url 'Authentication:get_sub_category' cat.crt_category_id  %}"
                                value="{{ cat.crt_category_id }}" {%if cat.crt_category_id == crt_id %}selected{%endif%}>
                            {{cat.crt_category_name}}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="col">
                <div class="form-group">
                    <label for="itemSubCategory">Sub-Category</label>
                    <select id="itemSubCategory" name="itemSubCategory" class="form-control">
                        <option selected>Choose...</option>

                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="form-group col ">
                <label for="color " class="col-form-label">Product Color</label>
                <div>
                    <input type="color" id="color " class="form-control col-6" name="crt_item_color" value="" required>
                </div>
            </div>
            <div class="form-group col ">
                <label for="itemSize" class="col-form-label ">Size</label>
                <div>
                    <select id="itemSize" name="crt_item_size"
                            class="form-control {% if detail.errors.crt_item_size == None and detail.is_bound %} is-valid {% elif detail.errors.crt_item_size != None %} is-invalid {% endif %}"
                            aria-describedby="inputGroupPrepend3 validateSize">
                        <option>Choose...</option>
                        <option value="XXL" {%if detail.crt_item_size.value == 'XXL' %} selected{%endif%}>XXL</option>
                        <option value="XL" {%if detail.crt_item_size.value == 'XL' %} selected{%endif%}>XL</option>
                        <option value="L" {%if detail.crt_item_size.value == 'L' %} selected{%endif%}>L</option>
                        <option value="M" {%if detail.crt_item_size.value == 'M' %} selected{%endif%}>M</option>
                        <option value="S" {%if detail.crt_item_size.value == 'S' %} selected{%endif%}>S</option>
                        <option value="XS" {%if detail.crt_item_size.value == 'XS' %} selected{%endif%}>XS</option>
                    </select>
                    <div id="validateSize" class="invalid-feedback">
                        {{ detail.crt_item_size.errors.as_text}}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group col ">
                <label for="itemQuantity" class="col-form-label">Quantity</label>
                <div>
                    <input id="itemQuantity" name="crt_item_qty" type="number" min="1" step="1"
                           class="form-control {% if detail.errors.crt_item_qty == None and detail.is_bound %} is-valid {% elif detail.errors.crt_item_qty != None %} is-invalid {% endif %}"
                           value="{{ detail.crt_item_qty.value | default:1 }}"
                           aria-describedby="inputGroupPrepend3 validateQuantity">
                    <div id="validateQuantity" class="invalid-feedback">
                        {{ detail.crt_item_qty.errors.as_text}}
                    </div>
                </div>
            </div>
            <div class="form-group col ">
                <label for="itemUnitPrice" class="col-form-label">Unit Price</label>
                <div>
                    <input type="number" id="itemUnitPrice" name="crt_item_price" step="0.25" min="1"
                           class="form-control {% if detail.errors.crt_item_price == None and detail.is_bound %} is-valid {% elif detail.errors.crt_item_price != None %} is-invalid {% endif %}"
                           value="{{ detail.crt_item_price.value | default:1.00 }}"
                           aria-describedby="inputGroupPrepend3 validateUnitPrice">
                    <div id="validateUnitPrice" class="invalid-feedback">
                        {{ detail.crt_item_price.errors.as_text}}
                    </div>
                </div>
            </div>
        </div>

        <div class="py-4">
            <h3 class="text-left">Product images</h3>
            <div id="uploadedImages" class="py-1 text-center">
                <div>
                    <img src="{% static 'img/products/creative/wallstickers.jpg' %}" class="img-fluid rounded px-2" alt="Responsive image" width="190">
                    <img src="{% static 'img/products/creative/ceramicairfreshner.jpg' %}" class="img-fluid rounded px-2" alt="Responsive image" width="190">
                    <img src="{% static 'img/products/creative/customizedbottles.jpg' %}" class="img-fluid rounded px-2" alt="Responsive image" width="190">
                    <img src="{% static 'img/products/creative/customizedglasses.jpg' %}" class="img-fluid rounded px-2" alt="Responsive image" width="190">
                    <img src="{% static 'img/products/creative/chaicup.jpg' %}" class="img-fluid rounded px-2" alt="Responsive image" width="190">
                    <img src="{% static 'img/products/creative/lamp.jpg' %}" class="img-fluid rounded px-2" alt="Responsive image" width="190">
                </div>
                <button id="img-remove" type="button" class="btn btn-sm pri-bg-color my-3" onclick="removeImage();">remove and upload new</button>
            </div>
            <div id="uploadNewImages" class="custom-file my-1" style="display:none;">
                <input type="file" id="customFile" name="crt_img_url" required multiple
                     class="custom-file-input {% if image_error == None and form.is_bound %}is-valid{% elif image_error != None and error %}is-invalid{% endif %}"
                     aria-describedby="inputGroupPrepend3 validateImages">
                <label class="custom-file-label" for="customFile">Choose file</label>
                <div id="validateImages" class="invalid-feedback">
                    {{ image_error }}
                </div>
            </div>
        </div>



        <input type="submit" class="btn btn-sm pri-bg-color" value=" Update "/>
    </form>

</div>


{% endblock %}

{% block customscript %}
<script>
    var removeImage = function() {
        $('#uploadedImages').hide();
        $('#uploadNewImages').show();
    }

    function getCat(){
    var cat=$("#itemCategory").val();
    var catId = parseInt(cat);

    $.ajax({
       url: '/accounts/dashboard/product/creative/add/' + catId,
        success:function(response){
       //console.log(response.subCrtCat);
        	$("#itemSubCategory").empty();
	        $.each(response.subCrtCat,function(k,v){
	            // console.log(response.subCrtCat[k].crt_sub_category_name);
	            var subCatId = response.subCrtCat[k].crt_sub_category_id;
	            var subCatName = response.subCrtCat[k].crt_sub_category_name;
	            var opts = "<option value="+subCatId+">"+subCatName+"</option>";

	            $("#itemSubCategory").append(opts);

	        })
        },
       error: function(jqXHR, textStatus, errorThrown) {
          Swal.fire(
              jqXHR.status + "",
              textStatus + " : " + errorThrown,
              'error'
          )
       }

       });


    };

</script>
{% endblock %}