{% extends 'account/base-dashboard.html' %} {% load static %} {% block baselink %}
<link rel="stylesheet" href="{% static 'css/nikul/add-product.css' %}"/> {% endblock %} {% block base %}

<div class="page-title">
    Add Product
</div>
<hr/>
<div class="main-page">
    <form method="post" action="{% url 'Authentication:add_base_detail' 'mainDetail' %}">{% csrf_token %}
        <div class="form-group">
            <label for="productName">Product Name</label>
            <input type="text" name="crt_item_name"
                   class="form-control {% if form.errors.crt_item_name == None and form.is_bound %} is-valid {% elif form.errors.crt_item_name != None %} is-invalid {% endif %}"
                   id="productName" placeholder="Product Name" aria-describedby="inputGroupPrepend3 validateItemName"
                   value="{{form.crt_item_name.value | default:''}}">
            <div id="validateItemName" class="invalid-feedback">
                {{ form.crt_item_name.errors.as_text}}
            </div>
        </div>
        <div class="form-group">
            <label for="productDescription">Product Description</label>
            <textarea
                    class="form-control {% if form.errors.crt_item_desc == None and form.is_bound %} is-valid {% elif form.errors.crt_item_desc != None %} is-invalid {% endif %}"
                    name="crt_item_desc" id="productDescription" rows="3"
                    aria-describedby="inputGroupPrepend3 validateItemDesc">{{form.crt_item_desc.value | default:''}}</textarea>
            <div id="validateItemDesc" class="invalid-feedback">
                {{ form.crt_item_desc.errors.as_text}}
            </div>
        </div>


        <div class="row">
            <div class="col">
                <div class="form-group">
                    <label for="weight">Weight</label>
                    <select id="weight" name="crt_item_weight"
                            class="form-control {% if form.errors.crt_item_weight == None and form.is_bound %} is-valid {% elif form.errors.crt_item_weight != None %} is-invalid {% endif %}"
                            aria-describedby="inputGroupPrepend3 validateWeight">
                        <option value="0">Choose...</option>
                        <option value="1" {%if form.crt_item_weight.value == '1' %}selected{%endif%}>Below 100g</option>
                        <option value="2" {%if form.crt_item_weight.value == '2' %}selected{%endif%}>Below 250g</option>
                        <option value="3" {%if form.crt_item_weight.value == '3' %}selected{%endif%}>Below 500g</option>
                        <option value="4" {%if form.crt_item_weight.value == '4' %}selected{%endif%}>Below 1kg</option>
                        <option value="5" {%if form.crt_item_weight.value == '5' %}selected{%endif%}>Below 5kg</option>
                    </select>
                    <div id="validateWeight" class="invalid-feedback">
                        {{ form.crt_item_weight.errors.as_text}}
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="form-group">
                    <label for="height">Height</label>
                    <div class="input-group mb-2">
                        <input id="height" name="crt_item_height" value="{{form.crt_item_height.value | default:''}}"
                               class="form-control {% if form.errors.crt_item_height == None and form.is_bound %} is-valid {% elif form.errors.crt_item_height != None %} is-invalid {% endif %}"
                               aria-describedby="inputGroupPrepend3 validateHeight"/>
                        <div class="input-group-append">
                            <div class="input-group-text">cm</div>
                        </div>
                        <div id="validateHeight" class="invalid-feedback">
                            {{ form.crt_item_height.errors.as_text }}
                        </div>
                    </div>
                </div>

            </div>
            <div class="col">
                <div class="form-group">
                    <label for="width">Width</label>
                    <div class="input-group mb-2">
                        <input id="width" name="crt_item_width" value="{{form.crt_item_width.value | default:''}}"
                           class="form-control {% if form.errors.crt_item_width == None and form.is_bound %} is-valid {% elif form.errors.crt_item_width != None %} is-invalid {% endif %}"
                           aria-describedby="inputGroupPrepend3 validateWidth"/>
                        <div class="input-group-append">
                            <div class="input-group-text">cm</div>
                        </div>
                        <div id="validateWidth" class="invalid-feedback">
                            {{ form.crt_item_width.errors.as_text }}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="form-group">
                    <label for="itemCategory">Category</label>
                    <select id="itemCategory" name="itemCategory" class="form-control" onchange="getCat();" required>
                        <option value="">Choose...</option>
                        {% for cat in crtCategory %}
                        <option data-url="{% url 'Authentication:get_sub_category' cat.crt_category_id  %}"
                                value="{{ cat.crt_category_id }}" {%if cat.crt_category_id == crt_id %}selected{%endif%}>
                            {{cat.crt_category_name}}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="col">
                <div class="form-group">
                    <label for="itemSubCategory">Sub-Category</label>
                    <select id="itemSubCategory" name="itemSubCategory" class="form-control">
                        <option selected>Choose...</option>

                    </select>
                </div>
            </div>
        </div>

        <input type="submit" class="btn btn-sm btn-block pri-bg-color"/>
    </form>

</div>

{% endblock %}


{% block customscript %}
<script>
    function getCat(){
    var cat=$("#itemCategory").val();
    var catId = parseInt(cat);

    $.ajax({
       url: '/accounts/dashboard/product/creative/add/' + catId,
        success:function(response){
       //console.log(response.subCrtCat);
        	$("#itemSubCategory").empty();
	        $.each(response.subCrtCat,function(k,v){
	            // console.log(response.subCrtCat[k].crt_sub_category_name);
	            var subCatId = response.subCrtCat[k].crt_sub_category_id;
	            var subCatName = response.subCrtCat[k].crt_sub_category_name;
	            var opts = "<option value="+subCatId+">"+subCatName+"</option>";

	            $("#itemSubCategory").append(opts);

	        })
        },
       error: function(jqXHR, textStatus, errorThrown) {
          Swal.fire(
              jqXHR.status + "",
              textStatus + " : " + errorThrown,
              'error'
          )
       }

    });


};





</script>

{% endblock %}



